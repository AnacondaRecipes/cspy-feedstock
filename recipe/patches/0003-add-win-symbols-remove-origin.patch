From 0714ce8b6cca5a2737d51950596d756481cacf9b Mon Sep 17 00:00:00 2001
From: Lorenzo Pirritano <lpirritano@anaconda.com>
Date: Fri, 12 Jul 2024 20:10:25 +0200
Subject: [PATCH 3/6] add win symbols remove origin

---
 src/cc/CMakeLists.txt        | 1 +
 src/cc/python/CMakeLists.txt | 9 ---------
 2 files changed, 1 insertion(+), 9 deletions(-)

diff --git a/src/cc/CMakeLists.txt b/src/cc/CMakeLists.txt
index 8be8cb0..d3942f7 100644
--- a/src/cc/CMakeLists.txt
+++ b/src/cc/CMakeLists.txt
@@ -17,6 +17,7 @@ target_compile_features(BiDirectionalCpp PUBLIC cxx_std_20)
 
 set_target_properties(BiDirectionalCpp PROPERTIES CXX_EXTENSIONS TRUE
                                                   VERSION ${PROJECT_VERSION})
+set_target_properties(BiDirectionalCpp PROPERTIES WINDOWS_EXPORT_ALL_SYMBOLS TRUE)
 set_target_properties(
   BiDirectionalCpp
   PROPERTIES CXX_EXTENSIONS TRUE
diff --git a/src/cc/python/CMakeLists.txt b/src/cc/python/CMakeLists.txt
index 16a1fd7..e4cc491 100644
--- a/src/cc/python/CMakeLists.txt
+++ b/src/cc/python/CMakeLists.txt
@@ -15,19 +15,10 @@ target_include_directories(
 
 # note: macOS is APPLE and also UNIX !
 if(APPLE)
-  set_target_properties(
-    pyBiDirectionalCpp
-    PROPERTIES SUFFIX ".so"
-               INSTALL_RPATH
-               "@loader_path;@loader_path/../../${PROJECT_NAME}/.libs")
   set_property(
     TARGET pyBiDirectionalCpp
     APPEND
     PROPERTY LINK_FLAGS "-flat_namespace -undefined suppress")
-elseif(UNIX)
-  set_target_properties(
-    pyBiDirectionalCpp PROPERTIES INSTALL_RPATH
-                                  "$ORIGIN:$ORIGIN/../../${PROJECT_NAME}/.libs")
 endif()
 target_link_libraries(pyBiDirectionalCpp PRIVATE BiDirectionalCpp LEMON::LEMON spdlog::spdlog)
 
-- 
2.39.1

