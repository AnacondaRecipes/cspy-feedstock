From c97f1afc13a4e540629d3f8ad198f52d7848fe3d Mon Sep 17 00:00:00 2001
From: Lorenzo Pirritano <lpirritano@anaconda.com>
Date: Fri, 12 Jul 2024 15:13:09 +0200
Subject: [PATCH 3/3] test

---
 CMakeLists.txt               | 10 ++++++++--
 src/cc/python/CMakeLists.txt |  6 ++++++
 2 files changed, 14 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 16b91f2..ed11c46 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -63,6 +63,7 @@ message(STATUS "Build type: ${CMAKE_BUILD_TYPE}")
 include(GNUInstallDirs)
 if(UNIX)
   option(BUILD_SHARED_LIBS "Build shared libraries(.so or .dyld)." ON)
+  message(STATUS "Build shared libraries (.dll): ${BUILD_SHARED_LIBS}")
   set(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
   set(CMAKE_LIBRARY_OUTPUT_DIRECTORY
       ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_LIBDIR})
@@ -82,17 +83,22 @@ if(UNIX)
   endforeach()
 else()
   option(BUILD_SHARED_LIBS "Build shared libraries (.dll)." OFF)
+  message(STATUS "Build shared libraries (.dll): ${BUILD_SHARED_LIBS}")
   set(CMAKE_LIBRARY_OUTPUT_DIRECTORY
       ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_BINDIR})
   set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY
       ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_BINDIR})
   set(CMAKE_RUNTIME_OUTPUT_DIRECTORY
       ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_BINDIR})
+
+  message(STATUS "Libraries output directory: ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}")
+
   # for multi-config builds (e.g. msvc)
   foreach(OUTPUTCONFIG IN LISTS CMAKE_CONFIGURATION_TYPES)
     string(TOUPPER ${OUTPUTCONFIG} OUTPUTCONFIG)
     set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_${OUTPUTCONFIG}
-        ${CMAKE_BINARY_DIR}/${OUTPUTCONFIG}/${CMAKE_INSTALL_BINDIR})
+      ${CMAKE_BINARY_DIR}/${OUTPUTCONFIG}/${CMAKE_INSTALL_BINDIR})
+    message(STATUS "multi-config: Libraries output directory (${OUTPUTCONFIG}): ${CMAKE_BINARY_DIR}/${OUTPUTCONFIG}/${CMAKE_INSTALL_BINDIR}")
     set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_${OUTPUTCONFIG}
         ${CMAKE_BINARY_DIR}/${OUTPUTCONFIG}/${CMAKE_INSTALL_BINDIR})
     set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_${OUTPUTCONFIG}
@@ -105,7 +111,7 @@ option(BUILD_CXX "Build C++ library" ON)
 option(BUILD_PYTHON "Build Python Library" OFF)
 option(BUILD_DOTNET "Build Dotnet Library" OFF)
 set(LOG_LEVEL
-    "WARN"
+    "DEBUG"
     CACHE
       STRING
       "Choose the logging level, options are: OFF (default), WARN, INFO, DEBUG, TRACE."
diff --git a/src/cc/python/CMakeLists.txt b/src/cc/python/CMakeLists.txt
index 16a1fd7..991aaa5 100644
--- a/src/cc/python/CMakeLists.txt
+++ b/src/cc/python/CMakeLists.txt
@@ -28,6 +28,12 @@ elseif(UNIX)
   set_target_properties(
     pyBiDirectionalCpp PROPERTIES INSTALL_RPATH
                                   "$ORIGIN:$ORIGIN/../../${PROJECT_NAME}/.libs")
+elseif(WIN32)
+  message(STATUS "Add libraries input folder: ${CMAKE_INSTALL_LIBDIR}")
+  link_directories(${CMAKE_INSTALL_LIBDIR})
+  set_target_properties(pyBiDirectionalCpp PROPERTIES
+    IMPORTED_LOCATION "${CMAKE_INSTALL_LIBDIR}/BiDirectionalCpp.lib"
+  )
 endif()
 target_link_libraries(pyBiDirectionalCpp PRIVATE BiDirectionalCpp LEMON::LEMON spdlog::spdlog)
 
-- 
2.39.1

